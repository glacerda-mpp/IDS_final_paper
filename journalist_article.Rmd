---
title: "Data Science Final Project"
author: "Rodrigo Bolaños, Eduardo Campbell and Guilherme Lacerda"
output:
  html_document:
    theme: cerulean
---
```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)


pacman::p_load(rmdformats, tidyverse, stringr,pdftools) #add here the libraries you are using


```


```{r functions}
#functions #this should be hidden


##1. Diversity statement function##

read_div_statement <- function(syllabus_pdf){
  
  #Cut it by lines
  syllabus_l<-scan(textConnection(syllabus_pdf), what="character",sep = "\n")
  #make it a dataframe 
  syllabus_df<-as.data.frame(unlist(syllabus_l)) 
  #change name of column
  names(syllabus_df)[1] <- "lines"
  #syllabus_df<-tolower(lines)
  
  #find the Diversity statement line
  diversity_line<-grep("Diversity Statement", syllabus_df$lines)
  
  if (length(diversity_line)==0) {
    #Diversity statement
    diversity_line<-grep("Diversity statement", syllabus_df$lines)
  } 
  #find the Grading line
  assignment_line<- grep("Grading and Assignments", syllabus_df$lines)
  
  if(length(diversity_line)!=0)
  {
  #the diversity statement is between these tw
   diversity_df<-syllabus_df %>%
    slice((diversity_line+1):(assignment_line-1))
  
  #take out those lines that have exactly one character 
  diversity_df<-diversity_df %>%
    filter(nchar(as.character(lines))!=1)

  #create a string
  div_statement<-paste(diversity_df$lines,collapse=" ")
  
  div_statement<- div_statement %>%str_remove(.,"[:digit:]") %>% str_trim(.)
  } else{
    div_statement="NULL"
  }
  div_statement
}


#. 2. Split readings function

split_readings<-function(complete_df,no_c){ #1
  for (i in 22:33){ #2
    add_readings<-as.data.frame(complete_df[no_c,i])
    names(add_readings)[1]<-"readings"
    
    if (i==22) { #3
      split_readings_df<-rbind(add_readings)
    }else{  #3 - #4
      split_readings_df<-rbind(split_readings_df,add_readings)
    }  #4  
    
  } #2

  split_readings_df<-as.data.frame(unlist(split_readings_df))
  names(split_readings_df)[1]<-"reading_list"
  
  split_readings_df<-split_readings_df%>%
    mutate(reading_list=str_trim(reading_list))
  
  split_readings_df
  
} 

##3. Split names function

split_names<-function(readings_l){
  
  for (i in 1:nrow(readings_l)) {
    
    a<-word(readings_l[i,1],1) %>%
      str_remove(.,"[:punct:]") %>%
      str_trim(.)
    
    b<-word(readings_l[i,1],2) %>%
      str_remove(.,"[:punct:]")%>%
      str_trim(.)
    
    names_df<-data.frame(a,b)
    names(names_df)[1]<-"last_name"
    names(names_df)[2]<-"name_name"
    
    if (i==1) { 
      final_names_df<-rbind(names_df)
    }else{
      final_names_df<-rbind(final_names_df,names_df)
    }  
  }
  
  final_names_df
}

##4. Percentage of females ###

percentage_female<-function(reading_names) {
  
  list_names<-reading_names$name_name
  
  list_names<-list_names %>%
    str_remove(.,"[:punct:]")%>%
    str_trim(.)
  
  count_a<-gender(list_names)%>%
    group_by(gender) %>%
    summarise(n=n()/nrow(.))
  
  if (nrow(count_a)==2) {
    result<-unlist(count_a[1,2])
  }else{
   result<-0
    }
  
  
  result
}

```


```{r load-diversity-statements}

working_directory<-getwd()
list_syllabi<-list.files("./syllabi_pdfs")
pdfs<-map(paste0(working_directory,"/syllabi_pdfs/",list_syllabi),pdf_text)
a<-map(pdfs,read_div_statement)
div_statement_df<-data.frame(unlist(list_syllabi),unlist(a))

```

```{r getting-readings}

#the ideal here would be to merge 


complete_df<-readr::read_csv("div_stats_last.csv")

complete_df<-complete_df %>%
  mutate(sep_read_1=str_split(Readings_1,";"))

complete_df<-complete_df %>%
  mutate(sep_read_2=str_split(Readings_2,";"))

complete_df<-complete_df %>%
  mutate(sep_read_3=str_split(Readings_3,";"))

complete_df<-complete_df %>%
  mutate(sep_read_4=str_split(Readings_4,";"))

complete_df<-complete_df %>%
  mutate(sep_read_5=str_split(Readings_5,";"))

complete_df<-complete_df %>%
  mutate(sep_read_6=str_split(Readings_6,";"))

complete_df<-complete_df %>%
  mutate(sep_read_7=str_split(Readings_7,";"))

complete_df<-complete_df %>%
  mutate(sep_read_8=str_split(Readings_8,";"))

complete_df<-complete_df %>%
  mutate(sep_read_9=str_split(Readings_9,";"))

complete_df<-complete_df %>%
  mutate(sep_read_10=str_split(Readings_10,";"))

complete_df<-complete_df %>%
  mutate(sep_read_11=str_split(Readings_11,";"))

complete_df<-complete_df %>%
  mutate(sep_read_12=str_split(Readings_12,";"))






readings_bauer<-split_readings(complete_df,1)
reading_list_bauer<-split_names(readings_bauer)


readings_ahrens<-split_readings(complete_df,2)
reading_list_ahrens<-split_names(readings_ahrens)


readings_gruener<-split_readings(complete_df,3)
reading_list_gruener<-split_names(readings_gruener)

readings_lancker<-split_readings(complete_df,4)
reading_list_lancker<-split_names(readings_lancker)

readings_patz<-split_readings(complete_df,5)
reading_list_patz<-split_names(readings_patz)

readings_jachten<-split_readings(complete_df,6)
reading_list_jachten<-split_names(readings_jachten)

readings_costello<-split_readings(complete_df,7)
reading_list_costello<-split_names(readings_costello)

readings_bosch<-split_readings(complete_df,8)
reading_list_bosch<-split_names(readings_bosch)

readings_bobic<-split_readings(complete_df,9)
reading_list_bobic<-split_names(readings_bobic)

readings_wucher<-split_readings(complete_df,10) #this is missing
reading_list_wucher<-split_names(readings_wucher)


readings_dkt<-split_readings(complete_df,11) #this is missing
reading_list_dkt<-split_names(readings_dkt)

readings_hassel<-split_readings(complete_df,12)
reading_list_hassel<-split_names(readings_hassel)


readings_hickman<-split_readings(complete_df,13)
reading_list_hickman<-split_names(readings_hickman)

readings_graf<-split_readings(complete_df,14)
reading_list_graf<-split_names(readings_graf)

readings_migliorati<-split_readings(complete_df,15)
reading_list_migliorati<-split_names(readings_migliorati)


readings_hustedt<-split_readings(complete_df,16)
reading_list_hustedt<-split_names(readings_hustedt)

readings_parrado<-split_readings(complete_df,17)
reading_list_parrado<-split_names(readings_parrado)

readings_wegrich<-split_readings(complete_df,18)
reading_list_wegrich<-split_names(readings_wegrich)

readings_kayser<-split_readings(complete_df,19)
reading_list_kayser<-split_names(readings_kayser)

readings_munzert<-split_readings(complete_df,20)
reading_list_munzert<-split_names(readings_munzert)


bauer_female<-percentage_female(reading_list_bauer)

ahrens_female<-percentage_female(reading_list_ahrens)

costello_female<-percentage_female(reading_list_costello)
gruener_female<-percentage_female(reading_list_gruener)

lancker_female<-reading_list_lancker%>%
  percentage_female(.)

patz_female<-patz_female<-reading_list_patz%>%
  percentage_female(.)

jacthen_female<-reading_list_jachten%>%
  percentage_female(.)

costello_female<-reading_list_costello%>%
  percentage_female(.)

bosch_female<-reading_list_bosch%>%
  percentage_female(.)

bobic_female<-reading_list_bobic%>%
  percentage_female(.)

wucher_female<-reading_list_wucher%>%
  percentage_female(.)

dkt_female<-reading_list_dkt%>%
  percentage_female(.)

hassel_female<-reading_list_hassel%>%
  percentage_female(.)

hickman_female<-reading_list_hickman%>%
  percentage_female(.)

graf_female<-reading_list_graf%>%
  percentage_female(.)

migliorati_female<-reading_list_migliorati%>%
  percentage_female(.)

hustedt_female<-reading_list_hustedt%>%
  percentage_female(.)

parrado_female<-reading_list_parrado%>%
  percentage_female(.)

wegrich_female<-reading_list_wegrich%>%
  percentage_female(.)

kayser_female<-reading_list_kayser%>%
  percentage_female(.)

munzert_female<-reading_list_munzert%>%
  percentage_female(.)




classes_1<-c("Bauer_internationalorganizations.pdf","econIIeconomiccrises_Ahrens.pdf",
             "econIIfinmarketpolicy_Gruener.pdf","econIIsustainability_Lancker.pdf",
             "globalgov_Patz_Rev.pdf","globalgoveu_Jachtenfuchs.pdf",
             "international_law_CaliCostello.pdf",
             "introduction_to_economics_Bosch-Rosa.pdf",
             "lawgovernanceruleoflawcrisis_Bobic.pdf",
             "NOinternationalsecurity_Gohdes_Wucherpfennig.pdf",
             "NOlawgov_Dawson-Kurban-Thielborger.pdf","policyprocess_welfareemployment_Hassel.pdf",
             "policyprocessclimate_Hickmann_Fuhr.pdf","policyprocesseduclaborecon_Graf.pdf",
             "policyprocesseu_Migliorati.pdf","public_mgmt_hustedt.pdf","public_mgmt_Parrado.pdf",
             "public_mgmt_Wegrich.pdf","statistics1_Kayser.pdf","statisticsII_Munzert.pdf")


female_list<-c(bauer_female,ahrens_female,gruener_female,lancker_female,patz_female,
            jacthen_female,costello_female,bosch_female,bobic_female,wucher_female,
            dkt_female,hassel_female,hickman_female,graf_female,migliorati_female,
            hustedt_female,parrado_female,wegrich_female,kayser_female,munzert_female)


female_df<-data.frame(classes_1,female_list)

```


## Introduction: 

In the last couple of years, the Hertie School publicly expressed its commitment towards diversity and inclusion. This was exemplified by creation of the Diversity and Inclusion Task Force 2019 that aimed to identify general strategic objectives for the school, including definitions of equality, diversity and inclusion; identify action and issue-area specific goals; and recommend measures to achieve the goals identified. Despite these efforts, the university faced internal and external criticism and outrage sparked by an article posted by a professor that compared BLM protestors removing statues to barbarians. As a result, students expressed their discontent not only by the article published but also due to the lack of diversity and inclusion at the university. According to Karim Fereidooni, a professor at the Ruhr-University in Bochum who focuses on critical race theory in education, “German universities need to employ more people who are familiar with racism, and they need to do more to hire a diverse workforce.”

Even though issues related to racism are far from being solved at the university, the Hertie School has made clear efforts on other areas of diversity and inclusion. To ameliorate gender gaps in higher education, the faculty body pledged to not to participate in “men-only” panels; and a commitment to host more inclusive events at the Hertie School. Moreover, there is a strategy to recruit more women in faculty, and soon the university will officially appoint its first female president Dr. Cornelia Woll. 

As noted, the Hertie School is committed to improve its diversity and inclusion strategy, especially regarding gender equality and equity. Nevertheless, these commitments seem to be mostly administrative and little is known about the outcomes of such efforts on the student body. Consequently, a core course audit was conducted by three Master’s of Public Policy students in order to figure out some diversity and inclusion indicators on the course syllabi. 

The main question that these students aimed to explore on the course audit was: how is diversity and inclusion fostered on the course syllabus? 


## Methodology and Data Collection

## Motivation and Relevance 

Diversity and inclusion is a phrase that has gained increasing popularity among the Hertie Administration and higher education institutions as a whole. However, it is often referred to as an abstract concept or value that ìs part of the university experience without clear metrics on how to increase, implement and strengthen policies that aim to foster such value. While it is true that the university leadership is committed to ameliorate the experiences of students regarding diversity and inclusion, there is often a disconnect if that commitment is translating to the daily lives of students at the university. For that reason, students conducted a research project to investigate how diversity and inclusion is cultivated and strengthened on the courses’ syllabi. 

While diversity and inclusion has become a trendy topic among several organizations, its importance is crucial when training policy makers. Hertie as a policy school must guarantee an integral training in policy making, meaning that it should actively promote an intersectional diversity and inclusion approach to its teaching curricula. 

## Finding and Analysis

(code)

## Policy Recommendations 



